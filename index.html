# Family Hotel Manager - HTML Completo 2025

<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Hotel Manager - Gestione Preventivi</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <h1>🏨 Family Hotel Manager</h1>
            <p class="subtitle">Gestione completa preventivi vacanze famiglia</p>
        </div>
        
        <nav class="main-nav">
            <button id="nav-dashboard" class="nav-btn active">📊 Dashboard</button>
            <button id="nav-add" class="nav-btn">➕ Aggiungi</button>
            <button id="nav-import-email" class="nav-btn">📧 Import Email</button>
            <button id="nav-import-url" class="nav-btn">🔗 Import URL</button>
        </nav>
    </header>

    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="section-dashboard" class="section active">
            <div class="section-header">
                <h2>📊 Dashboard Preventivi</h2>
                <div class="stats-summary" id="stats-summary">
                    <div class="stat-card">
                        <span class="stat-number" id="total-preventivi">0</span>
                        <span class="stat-label">Preventivi</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="avg-price">€0</span>
                        <span class="stat-label">Prezzo medio</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="best-deal">-</span>
                        <span class="stat-label">Miglior offerta</span>
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <table class="dashboard-table">
                    <thead>
                        <tr>
                            <th>🏨 Hotel</th>
                            <th>💰 Prezzo</th>
                            <th>📅 Periodo</th>
                            <th>⭐ Stelle</th>
                            <th>🔧 Azioni</th>
                        </tr>
                    </thead>
                    <tbody id="dashboard-body">
                        <!-- Preventivi inseriti dinamicamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Add/Edit Section -->
        <section id="section-add" class="section">
            <div class="section-header">
                <h2 id="form-title">➕ Aggiungi Preventivo</h2>
            </div>
            
            <form id="quote-form" class="quote-form">
                <input type="hidden" id="currentEditId" value="">
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="hotel">🏨 Nome Hotel *</label>
                        <input type="text" id="hotel" required placeholder="Es. Family Resort Marina">
                    </div>
                    
                    <div class="form-group">
                        <label for="prezzo">💰 Prezzo Totale (€) *</label>
                        <input type="number" id="prezzo" required min="0" step="0.01" placeholder="1250.00">
                    </div>
                    
                    <div class="form-group">
                        <label for="checkIn">📅 Check-in *</label>
                        <input type="date" id="checkIn" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="checkOut">📅 Check-out *</label>
                        <input type="date" id="checkOut" required>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" id="submitBtn" class="btn btn-primary">➕ Aggiungi Preventivo</button>
                    <button type="button" id="cancelEditBtn" class="btn btn-secondary" style="display: none;">❌ Annulla Modifica</button>
                </div>
            </form>
        </section>

        <!-- Import Email Section -->
        <section id="section-import-email" class="section">
            <div class="section-header">
                <h2>📧 Importa da Email</h2>
                <p class="section-description">Carica file di preventivi ricevuti via email e popolamento automatico</p>
            </div>
            
            <div class="import-container">
                <div class="import-instructions">
                    <h3>📋 Istruzioni:</h3>
                    <ol>
                        <li>Salva l'email del preventivo come file .eml o .txt</li>
                        <li>Carica il file qui sotto</li>
                        <li>Il sistema estrarrà automaticamente i dati</li>
                        <li>Controlla e modifica prima di salvare</li>
                    </ol>
                </div>
                
                <div class="file-upload-area">
                    <input type="file" id="emailFileInput" accept=".eml,.txt,.html" style="display: none;">
                    <div class="upload-drop-zone" id="uploadDropZone">
                        <div class="upload-icon">📁</div>
                        <p><strong>Clicca per selezionare</strong> o trascina qui il file email</p>
                        <small>Formati supportati: .eml, .txt, .html</small>
                    </div>
                </div>
                
                <div id="emailPreview" class="preview-container" style="display: none;">
                    <!-- Anteprima email caricata -->
                </div>
                
                <div class="import-actions">
                    <button id="parseEmailBtn" class="btn btn-primary" disabled>🔍 Analizza Email</button>
                </div>
            </div>
        </section>

        <!-- Import URL Section -->
        <section id="section-import-url" class="section">
            <div class="section-header">
                <h2>🔗 Importa da URL</h2>
                <p class="section-description">Inserisci il link di un preventivo online per estrazione automatica dei dati</p>
            </div>
            
            <div class="import-container">
                <div class="url-input-group">
                    <label for="importUrlInput">🌐 URL Preventivo:</label>
                    <div class="input-with-button">
                        <input type="url" id="importUrlInput" 
                               placeholder="https://booking.com/hotel/..." 
                               class="url-input">
                        <button id="importUrlBtn" class="btn btn-primary">🔍 Estrai Dati</button>
                    </div>
                </div>
                
                <div class="proxy-status" id="proxyStatus">
                    <p><small>💡 <strong>Suggerimento:</strong> Funziona con Booking.com, Hotels.com, Expedia e molti siti hotel</small></p>
                </div>
                
                <div id="urlPreview" class="preview-container" style="display: none;">
                    <!-- Anteprima dati estratti -->
                </div>
                
                <div class="cors-info">
                    <h4>ℹ️ Informazioni Proxy CORS</h4>
                    <p>L'app utilizza diversi proxy CORS per estrarre i dati:</p>
                    <ul>
                        <li><strong>AllOrigins:</strong> Servizio gratuito (20 req/min)</li>
                        <li><strong>CodeTabs:</strong> Solo GET (5 req/sec)</li>
                        <li><strong>CorsProxy.io:</strong> Piano gratuito disponibile</li>
                        <li><strong>X2U CORS:</strong> Demo limitata (richiede API key per uso esteso)</li>
                    </ul>
                    <p><small>⚠️ Per uso intensivo, considera di registrarti per una API key gratuita sui servizi premium.</small></p>
                </div>
            </div>
        </section>
    </main>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>🗑️ Conferma Eliminazione</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <p id="deleteMessage">Sei sicuro di voler eliminare questo preventivo?</p>
                <p><small>⚠️ Questa operazione non può essere annullata.</small></p>
            </div>
            <div class="modal-footer">
                <button id="confirmDelete" class="btn btn-danger">🗑️ Elimina</button>
                <button id="cancelDelete" class="btn btn-secondary">❌ Annulla</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
