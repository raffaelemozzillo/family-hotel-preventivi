<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Hotel Manager - Gestione Preventivi</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>üè® Family Hotel Manager</h1>
        <p>Sistema completo per gestione preventivi hotel per famiglie</p>
        <nav class="main-nav">
            <button id="navDashboard" class="nav-btn active">üìä Dashboard</button>
            <button id="navAdd" class="nav-btn">‚ûï Aggiungi</button>
            <button id="navImportUrl" class="nav-btn">üîó Import URL</button>
        </nav>
    </header>

    <main>
        <!-- Sezione Dashboard -->
        <section id="section-dashboard" class="section active">
            <div class="section-header">
                <h2>Dashboard Preventivi</h2>
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-number" id="totalPreventivi">0</div>
                        <div class="stat-label">Preventivi Totali</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avgPrice">‚Ç¨0</div>
                        <div class="stat-label">Prezzo Medio</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="bestHotel">-</div>
                        <div class="stat-label">Migliore Hotel</div>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-content">
                <div class="table-container">
                    <table class="dashboard-table">
                        <thead>
                            <tr>
                                <th>üè® Hotel</th>
                                <th>üí∞ Prezzo</th>
                                <th>üìÖ Periodo</th>
                                <th>‚≠ê Valutazione</th>
                                <th>‚öôÔ∏è Azioni</th>
                            </tr>
                        </thead>
                        <tbody id="dashboardBody">
                            <!-- Righe generate dinamicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Sezione Aggiungi/Modifica -->
        <section id="section-add" class="section">
            <div class="section-header">
                <h2 id="formTitle">Aggiungi Nuovo Preventivo</h2>
            </div>
            
            <form id="quoteForm" class="quote-form">
                <input type="hidden" id="editId" value="">
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="hotel">üè® Nome Hotel *</label>
                        <input type="text" id="hotel" name="hotel" required 
                               placeholder="Es. Family Resort Marina">
                    </div>
                    
                    <div class="form-group">
                        <label for="prezzo">üí∞ Prezzo Totale (‚Ç¨) *</label>
                        <input type="number" id="prezzo" name="prezzo" required 
                               min="0" step="0.01" placeholder="1200.00">
                    </div>
                    
                    <div class="form-group">
                        <label for="checkIn">üìÖ Check-in *</label>
                        <input type="date" id="checkIn" name="checkIn" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="checkOut">üìÖ Check-out *</label>
                        <input type="date" id="checkOut" name="checkOut" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="adulti">üë• Adulti</label>
                        <input type="number" id="adulti" name="adulti" 
                               value="2" min="1" max="10">
                    </div>
                    
                    <div class="form-group">
                        <label for="bambini">üë∂ Bambini</label>
                        <input type="number" id="bambini" name="bambini" 
                               value="2" min="0" max="10">
                    </div>
                </div>

                <!-- Servizi Hotel -->
                <div class="services-section">
                    <h3>üéØ Servizi Hotel</h3>
                    <div id="servizi-container" class="services-grid">
                        <!-- Servizi Alta Priorit√† -->
                        <div class="service-category">
                            <h4>üî• Alta Priorit√†</h4>
                            <div class="services-list">
                                <label class="service-item">
                                    <input type="checkbox" name="piscinaBambini">
                                    <span>üèä Piscina per bambini</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="miniclub">
                                    <span>üé™ Mini club</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="animazione">
                                    <span>üé≠ Animazione</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="spiaggiaPrivata">
                                    <span>üèñÔ∏è Spiaggia privata</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="ristoranteBambini">
                                    <span>üçΩÔ∏è Ristorante bambini</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="parcoBambini">
                                    <span>üé† Parco giochi</span>
                                </label>
                            </div>
                        </div>

                        <!-- Servizi Media Priorit√† -->
                        <div class="service-category">
                            <h4>‚ö° Media Priorit√†</h4>
                            <div class="services-list">
                                <label class="service-item">
                                    <input type="checkbox" name="allInclusive">
                                    <span>üç¥ All inclusive</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="beachClub">
                                    <span>üèñÔ∏è Beach club</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="wifiGratuito">
                                    <span>üì∂ WiFi gratuito</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="parcheggioGratuito">
                                    <span>üÖøÔ∏è Parcheggio gratuito</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="palestra">
                                    <span>üí™ Palestra</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="spa">
                                    <span>üßò Spa</span>
                                </label>
                            </div>
                        </div>

                        <!-- Servizi Standard -->
                        <div class="service-category">
                            <h4>üìã Standard</h4>
                            <div class="services-list">
                                <label class="service-item">
                                    <input type="checkbox" name="ristorante">
                                    <span>üçΩÔ∏è Ristorante</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="bar">
                                    <span>üçπ Bar</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="ariaCondizionata">
                                    <span>‚ùÑÔ∏è Aria condizionata</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="ascensore">
                                    <span>üõó Ascensore</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" id="submitBtn" class="btn-primary">
                        ‚ûï Aggiungi Preventivo
                    </button>
                    <button type="button" id="cancelEditBtn" class="btn-secondary" style="display: none;">
                        ‚ùå Annulla Modifica
                    </button>
                </div>
            </form>
        </section>

        <!-- Sezione Import URL -->
        <section id="section-import-url" class="section">
            <div class="section-header">
                <h2>üîó Importa da URL</h2>
                <p>Inserisci il link del preventivo per estrarre automaticamente i dati</p>
            </div>
            
            <div class="url-import-container">
                <div class="url-input-group">
                    <label for="importUrlInput">üåê URL Preventivo</label>
                    <input type="url" id="importUrlInput" 
                           placeholder="https://esempio.com/preventivo/123456"
                           class="url-input">
                    <button id="importUrlBtn" class="btn-primary">
                        üöÄ Estrai Dati
                    </button>
                </div>
                
                <div class="extraction-info">
                    <h3>‚ÑπÔ∏è Come funziona</h3>
                    <ul>
                        <li>‚úÖ Compatibile con i principali portali di prenotazione</li>
                        <li>üîÑ Sistema automatico di fallback tra proxy</li>
                        <li>üìä Estrazione intelligente di dati e servizi</li>
                        <li>‚ö° Popolamento automatico del form</li>
                    </ul>
                </div>

                <!-- Anteprima dati estratti -->
                <div id="extractionPreview" class="extraction-preview" style="display: none;">
                    <h3>üëÄ Anteprima Dati Estratti</h3>
                    <div id="previewContent" class="preview-content">
                        <!-- Contenuto generato dinamicamente -->
                    </div>
                    <div class="preview-actions">
                        <button onclick="app.showSection('add')" class="btn-primary">
                            ‚úèÔ∏è Modifica e Salva
                        </button>
                        <button onclick="document.getElementById('extractionPreview').style.display='none'" 
                                class="btn-secondary">
                            ‚ùå Chiudi
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Container per toast notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Modal per conferma eliminazione -->
    <div id="deleteModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>üóëÔ∏è Conferma Eliminazione</h3>
            </div>
            <div class="modal-body">
                <p>Sei sicuro di voler eliminare questo preventivo?</p>
                <p class="warning">‚ö†Ô∏è Questa operazione non pu√≤ essere annullata.</p>
            </div>
            <div class="modal-footer">
                <button id="confirmDelete" class="btn-danger">üóëÔ∏è Elimina</button>
                <button id="cancelDelete" class="btn-secondary">‚ùå Annulla</button>
            </div>
        </div>
    </div>

    <!-- Modal per aiuto estrazione manuale -->
    <div id="helpModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>üí° Inserimento Manuale Assistito</h3>
            </div>
            <div class="modal-body">
                <p>L'estrazione automatica non √® riuscita per questo URL.</p>
                <h4>üîó Segui questi passaggi:</h4>
                <ol>
                    <li>üì± Apri il link del preventivo in una nuova scheda</li>
                    <li>üìã Copia manualmente: nome hotel, prezzo totale, date</li>
                    <li>‚úèÔ∏è Incolla i dati nel form</li>
                    <li>‚úÖ Seleziona i servizi disponibili</li>
                </ol>
            </div>
            <div class="modal-footer">
                <button onclick="app.showSection('add'); document.getElementById('helpModal').style.display='none';" 
                        class="btn-primary">
                    ‚úèÔ∏è Procedi con Inserimento Manuale
                </button>
                <button onclick="document.getElementById('helpModal').style.display='none';" 
                        class="btn-secondary">
                    ‚ùå Chiudi
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
