<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Hotel Manager - Gestione Preventivi</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>ğŸ¨ Family Hotel Manager</h1>
        <p>Sistema completo per gestione preventivi hotel per famiglie</p>
        <nav class="main-nav">
            <button id="navDashboard" class="nav-btn active">ğŸ“Š Dashboard</button>
            <button id="navAdd" class="nav-btn">â• Aggiungi</button>
            <button id="navImportUrl" class="nav-btn">ğŸ”— Import URL</button>
        </nav>
    </header>

    <main>
        <!-- Sezione Dashboard -->
        <section id="section-dashboard" class="section active">
            <div class="section-header">
                <h2>Dashboard Preventivi</h2>
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-number" id="totalPreventivi">0</div>
                        <div class="stat-label">Preventivi Totali</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avgPrice">â‚¬0</div>
                        <div class="stat-label">Prezzo Medio</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="bestHotel">-</div>
                        <div class="stat-label">Migliore Hotel</div>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-content">
                <div class="table-container">
                    <table class="dashboard-table">
                        <thead>
                            <tr>
                                <th>ğŸ¨ Hotel</th>
                                <th>ğŸ’° Prezzo</th>
                                <th>ğŸ“… Periodo</th>
                                <th>â­ Valutazione</th>
                                <th>âš™ï¸ Azioni</th>
                            </tr>
                        </thead>
                        <tbody id="dashboardBody">
                            <!-- Righe generate dinamicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Sezione Aggiungi/Modifica -->
        <section id="section-add" class="section">
            <div class="section-header">
                <h2 id="formTitle">Aggiungi Nuovo Preventivo</h2>
            </div>
            
            <form id="quoteForm" class="quote-form">
                <input type="hidden" id="editId" value="">
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="hotel">ğŸ¨ Nome Hotel *</label>
                        <input type="text" id="hotel" name="hotel" required 
                               placeholder="Es. Family Resort Marina">
                    </div>
                    
                    <div class="form-group">
                        <label for="prezzo">ğŸ’° Prezzo Totale (â‚¬) *</label>
                        <input type="number" id="prezzo" name="prezzo" required 
                               min="0" step="0.01" placeholder="1200.00">
                    </div>
                    
                    <div class="form-group">
                        <label for="checkIn">ğŸ“… Check-in *</label>
                        <input type="date" id="checkIn" name="checkIn" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="checkOut">ğŸ“… Check-out *</label>
                        <input type="date" id="checkOut" name="checkOut" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="adulti">ğŸ‘¥ Adulti</label>
                        <input type="number" id="adulti" name="adulti" 
                               value="2" min="1" max="10">
                    </div>
                    
                    <div class="form-group">
                        <label for="bambini">ğŸ‘¶ Bambini</label>
                        <input type="number" id="bambini" name="bambini" 
                               value="2" min="0" max="10">
                    </div>
                </div>

                <!-- Servizi Hotel -->
                <div class="services-section">
                    <h3>ğŸ¯ Servizi Hotel</h3>
                    <div id="servizi-container" class="services-grid">
                        <!-- Servizi Alta PrioritÃ  -->
                        <div class="service-category">
                            <h4>ğŸ”¥ Alta PrioritÃ </h4>
                            <div class="services-list">
                                <label class="service-item">
                                    <input type="checkbox" name="piscinaBambini">
                                    <span>ğŸŠ Piscina per bambini</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="miniclub">
                                    <span>ğŸª Mini club</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="animazione">
                                    <span>ğŸ­ Animazione</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="spiaggiaPrivata">
                                    <span>ğŸ–ï¸ Spiaggia privata</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="ristoranteBambini">
                                    <span>ğŸ½ï¸ Ristorante bambini</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="parcoBambini">
                                    <span>ğŸ  Parco giochi</span>
                                </label>
                            </div>
                        </div>

                        <!-- Servizi Media PrioritÃ  -->
                        <div class="service-category">
                            <h4>âš¡ Media PrioritÃ </h4>
                            <div class="services-list">
                                <label class="service-item">
                                    <input type="checkbox" name="allInclusive">
                                    <span>ğŸ´ All inclusive</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="beachClub">
                                    <span>ğŸ–ï¸ Beach club</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="wifiGratuito">
                                    <span>ğŸ“¶ WiFi gratuito</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="parcheggioGratuito">
                                    <span>ğŸ…¿ï¸ Parcheggio gratuito</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="palestra">
                                    <span>ğŸ’ª Palestra</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="spa">
                                    <span>ğŸ§˜ Spa</span>
                                </label>
                            </div>
                        </div>

                        <!-- Servizi Standard -->
                        <div class="service-category">
                            <h4>ğŸ“‹ Standard</h4>
                            <div class="services-list">
                                <label class="service-item">
                                    <input type="checkbox" name="ristorante">
                                    <span>ğŸ½ï¸ Ristorante</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="bar">
                                    <span>ğŸ¹ Bar</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="ariaCondizionata">
                                    <span>â„ï¸ Aria condizionata</span>
                                </label>
                                <label class="service-item">
                                    <input type="checkbox" name="ascensore">
                                    <span>ğŸ›— Ascensore</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" id="submitBtn" class="btn-primary">
                        â• Aggiungi Preventivo
                    </button>
                    <button type="button" id="cancelEditBtn" class="btn-secondary" style="display: none;">
                        âŒ Annulla Modifica
                    </button>
                </div>
            </form>
        </section>

        <!-- Sezione Import URL -->
        <section id="section-import-url" class="section">
            <div class="section-header">
                <h2>ğŸ”— Importa da URL</h2>
                <p>Inserisci il link del preventivo per estrarre automaticamente i dati</p>
            </div>
            
            <div class="url-import-container">
                <div class="url-input-group">
                    <label for="importUrlInput">ğŸŒ URL Preventivo</label>
                    <input type="url" id="importUrlInput" 
                           placeholder="https://esempio.com/preventivo/123456"
                           class="url-input">
                    <button id="importUrlBtn" class="btn-primary">
                        ğŸš€ Estrai Dati
                    </button>
                </div>
                
                <div class="extraction-info">
                    <h3>â„¹ï¸ Come funziona</h3>
                    <ul>
                        <li>âœ… Compatibile con i principali portali di prenotazione</li>
                        <li>ğŸ”„ Sistema automatico di fallback tra proxy</li>
                        <li>ğŸ“Š Estrazione intelligente di dati e servizi</li>
                        <li>âš¡ Popolamento automatico del form</li>
                    </ul>
                </div>

                <!-- Anteprima dati estratti -->
                <div id="extractionPreview" class="extraction-preview" style="display: none;">
                    <h3>ğŸ‘€ Anteprima Dati Estratti</h3>
                    <div id="previewContent" class="preview-content">
                        <!-- Contenuto generato dinamicamente -->
                    </div>
                    <div class="preview-actions">
                        <button onclick="app.showSection('add')" class="btn-primary">
                            âœï¸ Modifica e Salva
                        </button>
                        <button onclick="document.getElementById('extractionPreview').style.display='none'" 
                                class="btn-secondary">
                            âŒ Chiudi
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Container per toast notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Modal per conferma eliminazione -->
    <div id="deleteModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ—‘ï¸ Conferma Eliminazione</h3>
            </div>
            <div class="modal-body">
                <p>Sei sicuro di voler eliminare questo preventivo?</p>
                <p class="warning">âš ï¸ Questa operazione non puÃ² essere annullata.</p>
            </div>
            <div class="modal-footer">
                <button id="confirmDelete" class="btn-danger">ğŸ—‘ï¸ Elimina</button>
                <button id="cancelDelete" class="btn-secondary">âŒ Annulla</button>
            </div>
        </div>
    </div>

    <!-- Modal per aiuto estrazione manuale -->
    <div id="helpModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ’¡ Inserimento Manuale Assistito</h3>
            </div>
            <div class="modal-body">
                <p>L'estrazione automatica non Ã¨ riuscita per questo URL.</p>
                <h4>ğŸ”— Segui questi passaggi:</h4>
                <ol>
                    <li>ğŸ“± Apri il link del preventivo in una nuova scheda</li>
                    <li>ğŸ“‹ Copia manualmente: nome hotel, prezzo totale, date</li>
                    <li>âœï¸ Incolla i dati nel form</li>
                    <li>âœ… Seleziona i servizi disponibili</li>
                </ol>
            </div>
            <div class="modal-footer">
                <button onclick="app.showSection('add'); document.getElementById('helpModal').style.display='none';" 
                        class="btn-primary">
                    âœï¸ Procedi con Inserimento Manuale
                </button>
                <button onclick="document.getElementById('helpModal').style.display='none';" 
                        class="btn-secondary">
                    âŒ Chiudi
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
